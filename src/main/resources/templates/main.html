<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <title>GameGround</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" rel="stylesheet"/>
    <script src="https://kit.fontawesome.com/b7f4bdb099.js" crossorigin="anonymous"></script>
    <script th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script th:src="@{/js/switch.js}" type="text/javascript"></script>
    <script th:src="@{/js/showRate.js}" type="text/javascript"></script>
    <script th:src="@{/js/activeFilters.js}" type="text/javascript"></script>
</head>
<body>
<header th:insert="blocks/header :: header"></header>

<main class="container py-5">
    <div th:insert="blocks/searchBar :: searchBar"></div>
    <div class="w-75 mx-auto" th:if="${last5tags != null}">
        <div class="d-inline p-5" th:each="tag: ${last5tags}"><a th:text="${tag.tagName}" th:href="@{/{tag}(tag=${tag.tagName})}" class="text-decoration-none"></a></div>
    </div>
    <h3 align="center" th:text="${register}"></h3>
    <h2 th:text="#{reviewsLabel}"></h2><hr><br>
    <div th:if="${searchResult != null}">
        <div th:if="${searchResult == true}"><h2  th:text="#{searchResults}+' '+${searchRequest}"></h2><hr><br></div>
        <div th:if="${searchResult == false}"><h2 th:text="#{nothingFound}"></h2><hr><br></div>
    </div>
    <div class="row" th:if="${reviews != null}">
        <div class="col-lg-3">
            <div class="card mb-4">
                <div class="card-body text-center">
                    <div class="col">
                        <h3 th:text="#{sortLabel}"></h3>
                        <div class="list-group">
                            <a th:href="@{/sort=dateASC}" class="list-group-item list-group-item-action list-group-item-dark" id="dateASC" th:text="#{date.ASC}"></a>
                            <a th:href="@{/sort=dateDSC}" class="list-group-item list-group-item-action list-group-item-dark" id="dateDSC" th:text="#{date.DSC}"></a>
                            <a th:href="@{/sort=ratingASC}" class="list-group-item list-group-item-action list-group-item-dark" id="ratingASC" th:text="#{rating.ASC}"></a>
                            <a th:href="@{/sort=ratingDSC}" class="list-group-item list-group-item-action list-group-item-dark" id="ratingDSC" th:text="#{rating.DSC}"></a>
                        </div>
                        <h3 th:text="#{filterLabel}"></h3>
                        <div class="list-group">
                            <a th:href="@{/filter=ratingGE4}" class="list-group-item list-group-item-action list-group-item-dark" id="ratingGE4" th:text="#{rating.GE4}"></a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col">
            <div class="col-lg-12 float-end" style="width: 100%">
                <div class="col" th:each="review: ${reviews}">
                    <div class="card mb-4">
                        <div class="card-body">
                            <a class="mb-0 text-decoration-none" th:href="@{/review/{id}(id=${review.id})}"><big th:text="${review.reviewName}"></big></a>
                            <div id="reviewRate" style="display: inline" class="float-end">
                                <script>displayRate([[${review.rate}]], "")</script>
                            </div>
                            <br>
                            <p class="mb-0" style="display: inline" th:text="#{genreLabel}"></p><p class="mb-0" th:text="${review.groupName}" style="display: inline"></p><br>
                            <p class="mb-0" style="display: inline" th:text="#{tagLabelSimple}"></p><div th:each="tag: ${review.tags}" style="display: inline"><p class="mb-0" th:text="${tag.tagName}+' '" style="display: inline"></p></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
<footer th:insert="blocks/footer :: footer"></footer>
</body>
</html>